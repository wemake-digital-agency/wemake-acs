<?phpif(!defined( 'WMACS_ABSPATH')) exit;// Scripts and stylesadd_action('admin_enqueue_scripts', function(){    wp_enqueue_style('wmacs-admin-style', WMACS_URI.'/assets/css/admin.css', array(), WMACS_PLUGIN_VERSION, 'all');	wp_enqueue_script('wmacs-admin-js', WMACS_URI.'/assets/js/admin.js', array(), WMACS_PLUGIN_VERSION, true);	if(!empty($_GET['page']) && $_GET['page']=='wmacs'){        wp_enqueue_style('wmacs-spectrum-style', WMACS_URI.'/lib/spectrum/spectrum.css', array(), WMACS_PLUGIN_VERSION, 'all');        wp_enqueue_script('wmacs-spectrum-js', WMACS_URI.'/lib/spectrum/spectrum.js', array(), null, true);    }});// Admin footeradd_action('admin_footer', function(){    ?>    <script>        var wmacs_language = {            "update_error": "<?php _e('Error. Please try again later.', WMACS_PLUGIN_SLUG); ?>",        };    </script>    <?php});// Plugin pagefunction wmacs_add_settings_page() {    add_options_page(        __('Accessibility Settings', WMACS_PLUGIN_SLUG),        __('Accessibility Settings', WMACS_PLUGIN_SLUG),        'manage_options',        'wmacs',        'wmacs_plugin_settings_page'    );}if(empty(get_option('wmacs_l'))){    add_action('admin_menu', 'wmacs_add_settings_page');}function wmacs_plugin_settings_page(){    $field_pref1 = 'wmacs_';    $field_pref2 = 'wmacs-';    $groups = array(        'tools' => 'Tools',        'style' => 'Style',        'visibility' => 'Visibility',        'position_pc' => 'Position (PC)',        'position_mob' => 'Position (Mobile)',    );    $options = array(        'show_for_pc'           => array(            'group' => 'visibility',            'type' => 'checkbox',            'default' => true,            'title' => 'Show for PC',        ),        'show_for_mob'          => array(            'group' => 'visibility',            'type' => 'checkbox',            'title' => 'Show for mobile devices',        ),        'increase_text'         => array(            'group' => 'tools',            'type' => 'checkbox',            'default' => true,            'title' => 'Increase text',        ),        'decrease_text'         => array(            'group' => 'tools',            'type' => 'checkbox',            'default' => true,            'title' => 'Decrease text',        ),        'grayscale'             => array(            'group' => 'tools',            'type' => 'checkbox',            'default' => true,            'title' => 'Grayscale',        ),        'high_contrast'         => array(            'group' => 'tools',            'type' => 'checkbox',            'default' => true,            'title' => 'High contrast',        ),        'reverse_contrast'      => array(            'group' => 'tools',            'type' => 'checkbox',            'default' => true,            'title' => 'Reverse contrast',        ),        'light_background'      => array(            'group' => 'tools',            'type' => 'checkbox',            'default' => true,            'title' => 'Light background',        ),        'highlight_links'       => array(            'group' => 'tools',            'type' => 'checkbox',            'default' => true,            'title' => 'Highlight links',        ),        'enable_readability'    => array(            'group' => 'tools',            'type' => 'checkbox',            'default' => true,            'title' => 'Readability',        ),        'white_cursor'    => array(            'group' => 'tools',            'type' => 'checkbox',            'default' => true,            'title' => 'White cursor',        ),        'black_cursor'    => array(            'group' => 'tools',            'type' => 'checkbox',            'default' => true,            'title' => 'Black cursor',        ),        'button_color'    => array(            'group' => 'style',            'type' => 'color',            'default' => '#FDD736',            'title' => 'Button',        ),        'icon_color'    => array(            'group' => 'style',            'type' => 'color',            'default' => '#000000',            'title' => 'Icon',        ),        'popup_color'    => array(            'group' => 'style',            'type' => 'color',            'default' => '#FFFFFF',            'title' => 'Popup',        ),        'text_color'    => array(            'group' => 'style',            'type' => 'color',            'default' => '#5d5d5d',            'title' => 'Text',        ),        'link_color'    => array(            'group' => 'style',            'type' => 'color',            'default' => '#0089CB',            'title' => 'Links',        ),        'position_pc'   => array(            'group' => 'position_pc',            'type' => 'radio',            'options' => array(                'top' => 'Top',                'mid' => 'Middle',                'bot' => 'Bottom',            )        ),        'position_mob'  => array(            'group' => 'position_mob',            'type' => 'radio',            'options' => array(                'top' => 'Top',                'mid' => 'Middle',                'bot' => 'Bottom',            )        ),    );    // Set default options    if(empty(get_option($field_pref1 . 'set_default_options'))){        foreach($options as $option_k => $option){            if(!empty($option['default'])){                update_option($field_pref1 . $option_k, $option['default']);            }        }        update_option($field_pref1 . 'set_default_options', 1);    }    // Update options    if(!empty($_POST['wmacs_update_options'])){        foreach($options as $option_k => $option){            update_option($field_pref1 . $option_k, $option['type']=='checkbox' ? !empty($_POST[$option_k]) : $_POST[$option_k]);        }    }    ?>    <div class="wmacs-form-wr">        <h2 class="wmacs-form-tt">            <?php _e('Accessibility Settings', WMACS_PLUGIN_SLUG); ?>        </h2>        <?php if(!empty($_POST['wmacs_update_options'])){ ?>            <div class="wmacs-form-success">                <?php _e('Settings successfully changed', WMACS_PLUGIN_SLUG); ?>            </div>        <?php } ?>        <form method="POST" action="" class="wmacs-form">            <input type="hidden" name="wmacs_update_options" value="1">            <?php foreach($groups as $group_k=>$group_t){ ?>                <div class="wmacs-group-tt">                    <?php _e($group_t, WMACS_PLUGIN_SLUG) ?>                </div>                <div class="wmacs-fields-wr wmacs-fields-visibility -compact">                    <?php foreach($options as $option_k => $option){                        if($option['group']!==$group_k) continue;                        $field_id = preg_replace('/_/', '-', $option_k);                        ?>                        <?php if($option['type']=='checkbox'){ ?>                            <div class="wmacs-settings-field<?php echo ' -' . $option['type']; ?>">                                <input type="checkbox" name="<?php echo $option_k; ?>" id="<?php echo $field_pref2 . $field_id; ?>" value="1"<?php if(!empty(get_option($field_pref1 . $option_k))) echo ' checked'; ?>>                                <label for="<?php echo $field_pref2 . $field_id; ?>">                                    <?php _e($option['title'], WMACS_PLUGIN_SLUG) ?>                                </label>                            </div>                        <?php }elseif($option['type']=='radio' && !empty($option['options'])){                            $not_first = 0;                            foreach($option['options'] as $s_k=>$sub_opt){                                $checked = '';                                $value = get_option($field_pref1 . $option_k);                                if($value==$s_k || $not_first && empty($value)){                                    $checked = ' checked';                                }                                ?>                                <div class="wmacs-settings-field<?php echo ' -' . $option['type']; ?>">                                    <input type="radio" name="<?php echo $option_k; ?>" id="<?php echo $field_pref2 . $field_id . '_' . $s_k; ?>" value="<?php echo $s_k; ?>"<?php echo $checked; ?>>                                    <label for="<?php echo $field_pref2 . $field_id . '_' . $s_k; ?>">                                        <?php _e($sub_opt, WMACS_PLUGIN_SLUG) ?>                                    </label>                                </div>                                <?php                                $not_first = 1;                            }                        }elseif($option['type']=='color'){                            $value = esc_attr(get_option($field_pref1 . $option_k));                            ?>                            <div class="wmacs-settings-field<?php echo ' -' . $option['type']; ?>">                                <label for="<?php echo $field_pref2 . $field_id; ?>">                                    <?php _e($option['title'], WMACS_PLUGIN_SLUG) ?>                                </label>                                <input type="text" name="<?php echo $option_k; ?>" id="<?php echo $field_pref2 . $field_id; ?>" value="<?php echo $value; ?>">                            </div>                        <?php } ?>                    <?php } ?>                </div>            <?php } ?>            <button type="submit" class="wmacs-form-submit">                <?php _e('Save settings', WMACS_PLUGIN_SLUG); ?>            </button>        </form>    </div>    <?php}// "Settings" linkadd_action('admin_footer', function(){    if(!preg_match('/plugins\.php/', $_SERVER['REQUEST_URI'])){        return false;    }    ?>    <script>        jQuery(function($){            $("[data-slug='wemake-acs'] .plugin-version-author-uri").append(" | <a href=\'<?php echo get_admin_url() . 'options-general.php?page=wmacs'; ?>\'><?php _e('Accessibility Settings', WMACS_PLUGIN_SLUG) ?></a>");        });    </script>    <?php});// Updaterequire_once(WMACS_ABSPATH . '/inc/admin_update.php');?>